{"version":3,"sources":["view.js"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/view.es6","sourcesContent":["import {ListWrapper, MapWrapper, Map, StringMapWrapper, List} from 'angular2/src/facade/collection';\nimport {AST, Locals, ChangeDispatcher, ProtoChangeDetector, ChangeDetector,\n  ChangeRecord, BindingRecord, DirectiveRecord, ChangeDetectorRef} from 'angular2/change_detection';\n\nimport {ProtoElementInjector, ElementInjector, PreBuiltObjects, DirectiveBinding} from './element_injector';\nimport {ElementBinder} from './element_binder';\nimport {SetterFn} from 'angular2/src/reflection/types';\nimport {IMPLEMENTS, int, isPresent, isBlank, BaseException} from 'angular2/src/facade/lang';\nimport {ViewContainer} from './view_container';\nimport * as renderApi from 'angular2/src/render/api';\nimport * as vfModule from './view_factory';\nimport * as vhModule from './view_hydrator';\n\n/**\n * Const of making objects: http://jsperf.com/instantiate-size-of-object\n *\n */\n@IMPLEMENTS(ChangeDispatcher)\n// TODO(tbosch): this is not supported in dart2js (no '.' is allowed)\n// @IMPLEMENTS(renderApi.EventDispatcher)\nexport class AppView {\n  render:renderApi.ViewRef;\n  /// This list matches the _nodes list. It is sparse, since only Elements have ElementInjector\n  rootElementInjectors:List<ElementInjector>;\n  elementInjectors:List<ElementInjector>;\n  changeDetector:ChangeDetector;\n  componentChildViews: List<AppView>;\n  /// Host views that were added by an imperative view.\n  /// This is a dynamically growing / shrinking array.\n  imperativeHostViews: List<AppView>;\n  viewContainers: List<ViewContainer>;\n  preBuiltObjects: List<PreBuiltObjects>;\n  proto: AppProtoView;\n  renderer: renderApi.Renderer;\n  viewFactory: vfModule.ViewFactory;\n  viewHydrator: vhModule.AppViewHydrator;\n\n  /**\n   * The context against which data-binding expressions in this view are evaluated against.\n   * This is always a component instance.\n   */\n\n  context: any;\n\n  /**\n   * Variables, local to this view, that can be used in binding expressions (in addition to the\n   * context). This is used for thing like `<video #player>` or\n   * `<li template=\"for #item of items\">`, where \"player\" and \"item\" are locals, respectively.\n   */\n  locals:Locals;\n\n  constructor(renderer:renderApi.Renderer, viewFactory:vfModule.ViewFactory, proto:AppProtoView, protoLocals:Map) {\n    this.render = null;\n    this.proto = proto;\n    this.changeDetector = null;\n    this.elementInjectors = null;\n    this.rootElementInjectors = null;\n    this.componentChildViews = null;\n    this.viewContainers = ListWrapper.createFixedSize(this.proto.elementBinders.length);\n    this.preBuiltObjects = null;\n    this.context = null;\n    this.locals = new Locals(null, MapWrapper.clone(protoLocals)); //TODO optimize this\n    this.renderer = renderer;\n    this.viewFactory = viewFactory;\n    this.viewHydrator = null;\n    this.imperativeHostViews = [];\n  }\n\n  init(changeDetector:ChangeDetector, elementInjectors:List, rootElementInjectors:List,\n      preBuiltObjects:List, componentChildViews:List) {\n    this.changeDetector = changeDetector;\n    this.elementInjectors = elementInjectors;\n    this.rootElementInjectors = rootElementInjectors;\n    this.preBuiltObjects = preBuiltObjects;\n    this.componentChildViews = componentChildViews;\n  }\n\n  getOrCreateViewContainer(boundElementIndex:number) {\n    var viewContainer = this.viewContainers[boundElementIndex];\n    if (isBlank(viewContainer)) {\n      viewContainer = new ViewContainer(this, this.proto.elementBinders[boundElementIndex].nestedProtoView, this.elementInjectors[boundElementIndex]);\n      this.viewContainers[boundElementIndex] = viewContainer;\n    }\n    return viewContainer;\n  }\n\n  setLocal(contextName: string, value) {\n    if (!this.hydrated()) throw new BaseException('Cannot set locals on dehydrated view.');\n    if (!MapWrapper.contains(this.proto.variableBindings, contextName)) {\n      return;\n    }\n    var templateName = MapWrapper.get(this.proto.variableBindings, contextName);\n    this.locals.set(templateName, value);\n  }\n\n  hydrated() {\n    return isPresent(this.context);\n  }\n\n  /**\n   * Triggers the event handlers for the element and the directives.\n   *\n   * This method is intended to be called from directive EventEmitters.\n   *\n   * @param {string} eventName\n   * @param {*} eventObj\n   * @param {int} binderIndex\n   */\n  triggerEventHandlers(eventName: string, eventObj, binderIndex: int) {\n    var locals = MapWrapper.create();\n    MapWrapper.set(locals, '$event', eventObj);\n    this.dispatchEvent(binderIndex, eventName, locals);\n  }\n\n  // dispatch to element injector or text nodes based on context\n  notifyOnBinding(b:BindingRecord, currentValue:any) {\n    if (b.isElement()) {\n      this.renderer.setElementProperty(\n        this.render, b.elementIndex, b.propertyName, currentValue\n      );\n    } else {\n      // we know it refers to _textNodes.\n      this.renderer.setText(this.render, b.elementIndex, currentValue);\n    }\n  }\n\n  getDirectiveFor(directive:DirectiveRecord) {\n    var elementInjector = this.elementInjectors[directive.elementIndex];\n    return elementInjector.getDirectiveAtIndex(directive.directiveIndex);\n  }\n\n  getDetectorFor(directive:DirectiveRecord) {\n    var elementInjector = this.elementInjectors[directive.elementIndex];\n    return elementInjector.getChangeDetector();\n  }\n\n  // implementation of EventDispatcher#dispatchEvent\n  // returns false if preventDefault must be applied to the DOM event\n  dispatchEvent(elementIndex:number, eventName:string, locals:Map<string, any>): boolean {\n    // Most of the time the event will be fired only when the view is in the live document.\n    // However, in a rare circumstance the view might get dehydrated, in between the event\n    // queuing up and firing.\n    var allowDefaultBehavior = true;\n    if (this.hydrated()) {\n      var elBinder = this.proto.elementBinders[elementIndex];\n      if (isBlank(elBinder.hostListeners)) return allowDefaultBehavior;\n      var eventMap = elBinder.hostListeners[eventName];\n      if (isBlank(eventMap)) return allowDefaultBehavior;\n      MapWrapper.forEach(eventMap, (expr, directiveIndex) => {\n        var context;\n        if (directiveIndex === -1) {\n          context = this.context;\n        } else {\n          context = this.elementInjectors[elementIndex].getDirectiveAtIndex(directiveIndex);\n        }\n        var result = expr.eval(context, new Locals(this.locals, locals));\n        if (isPresent(result)) {\n          allowDefaultBehavior = allowDefaultBehavior && result;\n        }\n      });\n    }\n    return allowDefaultBehavior;\n  }\n}\n\n/**\n *\n */\nexport class AppProtoView {\n  elementBinders:List<ElementBinder>;\n  protoChangeDetector:ProtoChangeDetector;\n  variableBindings: Map;\n  protoLocals:Map;\n  textNodesWithBindingCount:int;\n  bindings:List;\n  parentProtoView:AppProtoView;\n  _variableBindings:List;\n\n  _directiveRecordsMap:Map;\n  _directiveRecords:List;\n  render:renderApi.ProtoViewRef;\n\n  constructor(\n      render:renderApi.ProtoViewRef,\n      protoChangeDetector:ProtoChangeDetector) {\n    this.render = render;\n    this.elementBinders = [];\n    this.variableBindings = MapWrapper.create();\n    this.protoLocals = MapWrapper.create();\n    this.protoChangeDetector = protoChangeDetector;\n    this.parentProtoView = null;\n    this.textNodesWithBindingCount = 0;\n    this.bindings = [];\n    this._directiveRecordsMap = MapWrapper.create();\n    this._variableBindings = null;\n    this._directiveRecords = null;\n  }\n\n  //TODO: Tobias or Victor. Moving it into the constructor.\n  // this work should be done the constructor of AppProtoView once we separate\n  // AppProtoView and ProtoViewBuilder\n  getVariableBindings() {\n    if (isPresent(this._variableBindings)) {\n      return this._variableBindings;\n    }\n\n    this._variableBindings = isPresent(this.parentProtoView) ?\n      ListWrapper.clone(this.parentProtoView.getVariableBindings()) : [];\n\n    MapWrapper.forEach(this.protoLocals, (v, local) => {\n      ListWrapper.push(this._variableBindings, local);\n    });\n\n    return this._variableBindings;\n  }\n\n  //TODO: Tobias or Victor. Moving it into the constructor.\n  // this work should be done the constructor of ProtoView once we separate\n  // AppProtoView and ProtoViewBuilder\n  getdirectiveRecords() {\n    if (isPresent(this._directiveRecords)) {\n      return this._directiveRecords;\n    }\n\n    this._directiveRecords = [];\n\n    for (var injectorIndex = 0; injectorIndex < this.elementBinders.length; ++injectorIndex) {\n      var pei = this.elementBinders[injectorIndex].protoElementInjector;\n      if (isPresent(pei)) {\n        for (var directiveIndex = 0; directiveIndex < pei.numberOfDirectives; ++directiveIndex) {\n          ListWrapper.push(this._directiveRecords, this._getDirectiveRecord(injectorIndex, directiveIndex));\n        }\n      }\n    }\n\n    return this._directiveRecords;\n  }\n\n  bindVariable(contextName:string, templateName:string) {\n    MapWrapper.set(this.variableBindings, contextName, templateName);\n    MapWrapper.set(this.protoLocals, templateName, null);\n  }\n\n  bindElement(parent:ElementBinder, distanceToParent:int, protoElementInjector:ProtoElementInjector,\n      componentDirective:DirectiveBinding = null, viewportDirective:DirectiveBinding = null):ElementBinder {\n    var elBinder = new ElementBinder(this.elementBinders.length, parent, distanceToParent,\n        protoElementInjector, componentDirective, viewportDirective);\n    ListWrapper.push(this.elementBinders, elBinder);\n    return elBinder;\n  }\n\n  /**\n   * Adds a text node binding for the last created ElementBinder via bindElement\n   */\n  bindTextNode(expression:AST) {\n    var textNodeIndex = this.textNodesWithBindingCount++;\n    var b = BindingRecord.createForTextNode(expression, textNodeIndex);\n    ListWrapper.push(this.bindings, b);\n  }\n\n  /**\n   * Adds an element property binding for the last created ElementBinder via bindElement\n   */\n  bindElementProperty(expression:AST, setterName:string) {\n    var elementIndex = this.elementBinders.length-1;\n    var b = BindingRecord.createForElement(expression, elementIndex, setterName);\n    ListWrapper.push(this.bindings, b);\n  }\n\n  /**\n   * Adds an event binding for the last created ElementBinder via bindElement.\n   *\n   * If the directive index is a positive integer, the event is evaluated in the context of\n   * the given directive.\n   *\n   * If the directive index is -1, the event is evaluated in the context of the enclosing view.\n   *\n   * @param {string} eventName\n   * @param {AST} expression\n   * @param {int} directiveIndex The directive index in the binder or -1 when the event is not bound\n   *                             to a directive\n   */\n  bindEvent(eventBindings: List<renderApi.EventBinding>, directiveIndex: int = -1) {\n    var elBinder = this.elementBinders[this.elementBinders.length - 1];\n    var events = elBinder.hostListeners;\n    if (isBlank(events)) {\n      events = StringMapWrapper.create();\n      elBinder.hostListeners = events;\n    }\n    for (var i = 0; i < eventBindings.length; i++) {\n      var eventBinding = eventBindings[i];\n      var eventName = eventBinding.fullName;\n      var event = StringMapWrapper.get(events, eventName);\n      if (isBlank(event)) {\n        event = MapWrapper.create();\n        StringMapWrapper.set(events, eventName, event);\n      }\n      MapWrapper.set(event, directiveIndex, eventBinding.source);\n    }\n  }\n\n  /**\n   * Adds a directive property binding for the last created ElementBinder via bindElement\n   */\n  bindDirectiveProperty(\n    directiveIndex:number,\n    expression:AST,\n    setterName:string,\n    setter:SetterFn) {\n\n    var elementIndex = this.elementBinders.length-1;\n    var directiveRecord = this._getDirectiveRecord(elementIndex, directiveIndex);\n    var b = BindingRecord.createForDirective(expression, setterName, setter, directiveRecord);\n    ListWrapper.push(this.bindings, b);\n  }\n\n  _getDirectiveRecord(elementInjectorIndex:number, directiveIndex:number) {\n    var id = elementInjectorIndex * 100 + directiveIndex;\n    var protoElementInjector = this.elementBinders[elementInjectorIndex].protoElementInjector;\n\n    if (!MapWrapper.contains(this._directiveRecordsMap, id)) {\n      var binding = protoElementInjector.getDirectiveBindingAtIndex(directiveIndex);\n      var changeDetection = binding.changeDetection;\n\n      MapWrapper.set(this._directiveRecordsMap, id,\n        new DirectiveRecord(elementInjectorIndex, directiveIndex,\n          binding.callOnAllChangesDone, binding.callOnChange, changeDetection));\n    }\n\n    return MapWrapper.get(this._directiveRecordsMap, id);\n  }\n}\n"]}