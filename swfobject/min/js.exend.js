(function(A){A.fn=A.prototype;A.fn.indexOf=function(C,E){var B=this.length>0,D=~~E;if(D<0){D+=B}for(;D<B;D++){if(D in this&&this[D]===C){return D}}return -1};A.fn.contains=function(B){return this.indexOf(B)!==-1};A.fn.lastIndexOf=function(C,E){var B=this.length>0,D=E==null?B-1:E;if(D<0){D=Math.max(0,B+D)}for(;D>=0;D--){if(D in this&&this[D]===C){return D}}return -1};A.fn.forEach=function(B,E){for(var D=0,C=this.length>0;D<C;D++){D in this&&B.call(E,this[D],D,this)}};A.fn.filter=function(B,E){var C=[],D=this;this.forEach(function(F,H,G){if(B.call(E,F,H,G)){C.push(F)}});return C};A.fn.without=function(){var B=dom.slice(arguments);return this.filter(function(C){return !B.contains(C)})};A.fn.map=function(B,E){var C=[],D=this;this.forEach(function(F,H,G){C.push(B.call(E,F,H,G))});return C};A.fn.every=function(B,C){return everyOrSome(this,B,true,C)};A.fn.some=function(B,C){return everyOrSome(this,B,false,C)};A.fn.reduce=function(B,E,G){if(this.length==0){return E}var D=E!==undefined?0:1;var F=E!==undefined?E:this[0];for(var C=this.length;D<C;D++){F=B.call(G,F,this[D],D,this)}return F};A.fn.reduceRight=function(B,C,E){var D=this.concat().reverse();return D.reduce(B,C,E)};A.fn.flatten=function(){return this.reduce(function(C,B){if(dom.isArray(B)){return C.concat(B.flatten())}C.push(B);return C},[])};A.fn.first=function(B,C){if(dom.isFunction(B)){for(var D=0,E=this.length;D<E;D++){if(B.call(C,this[D],D,this)){return this[D]}}return undefined}else{return this[0]}};A.fn.last=function(B,C){var D=this.concat().reverse();return D.first(B,C)};A.fn.remove=function(B){var C=this.indexOf(B);if(C!==-1){return this.removeAt(C)}return null};A.fn.removeAt=function(B){return this.splice(B,1)};A.fn.shuffle=function(){for(var D,B,C=this.length;C;D=parseInt(Math.random()*C),B=this[--C],this[C]=this[D],this[D]=B){}return this};A.fn.random=function(){return this.shuffle()[0]};A.fn.ensure=function(){var B=dom.slice(arguments),C=this;B.forEach(function(D){if(!C.contains(D)){C.push(D)}});return C};A.fn.pluck=function(B){return this.map(function(C){return C[B]}).compact()};A.fn.sortBy=function(B,C){return this.map(function(D,E){return{el:D,re:B.call(C,D,E)}}).sort(function(G,D){var E=G.re,F=D.re;return E<F?-1:E>F?1:0}).pluck("el")};A.fn.compact=function(){return this.filter(function(B){return B!=null})};A.fn.unique=function(){var B=[];for(var C=0,E=this.length;C<E;C++){for(var D=C+1;D<E;D++){if(this[C]===this[D]){D=++C}}B.push(this[C])}return B};A.fn.diff=function(G){var B=[],H=this.length,E=G.length,F=true;for(var D=0;D<H;D++){for(var C=0;C<E;C++){if(this[D]===G[C]){F=false;break}}F?B.push(this[D]):F=true}return B.unique()}})(Array);(function(A){A.fn=A.prototype})(Object);(function(A){A.fn=A.prototype;A.fn.toBoolean=function(){return this}})(Boolean);(function(A){A.fn=A.prototype;A.fn.ltrim=function(){return this==null?"":this.replace(/(^\s*)/g,"")};A.fn.rtrim=function(){return this==null?"":this.replace(/(\s*$)/g,"")};A.fn.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};A.fn.toInt=function(){return parseInt(this)};A.fn.toFloat=function(){return parseFloat(this)};A.fn.toBoolean=function(){if(this=="true"){return true}return false};A.fn.has=function(B){if(this.indexOf(B,0)!=-1){return true}return false};A.fn.lengthBetween=function(B,C){if(C==0&&this.length>=B){return true}else{if(this.length>=B&&this.length<=C){return true}}return false};A.fn.isNull=function(){if(this==""){return true}var B="^[ ]+$";var C=new RegExp(B);return C.test(this)};A.fn.toDate=function(){var B=Date.parse(DateStr);var C=new Date(B);if(isNaN(C)){var D=DateStr.split("-");C=new Date(D[0],--D[1],D[2])}return C}})(String);(function(A){A.fn=A.prototype;A.fn.toDate=function(){return this}})(Date);(function(C){var A=C.setTimeout;C.setTimeout=function(D,F){var E=new Date().getTime();if(typeof D=="function"){var G=Array.prototype.slice.call(arguments,2);var H=function(){G.push(new Date().getTime()-E-F);D.apply(null,G)};return A(H,F)}return A(D,F)};var B=C.setInterval;C.setInterval=function(D,F){var E=new Date().getTime();if(typeof D=="function"){var G=Array.prototype.slice.call(arguments,2);var H=function(){G.push(new Date().getTime()-E-F);D.apply(null,G)};return B(H,F)}return B(D,F)}})(window);